== アプリケーションアセットの例

アプリケーションアセットクエリを構築および分析する方法を学びます。

[.task]
=== クエリの例 #1

`CODEOWNER` ファイルはあるが、リポジトリのブランチ保護ルールでそれが使用されていないコード リポジトリをすべて検索します。コード所有者が所有するコードを変更するプル リクエストは、保護されたブランチにマージする前にそのコード所有者によって承認される必要があるため、ブランチ保護ルールで `CODEOWNER` ファイルを使用すると、セキュリティとコードの品質を向上させることができます。


[.procedure]
. *[検索]*から *[アプリケーションアセット]* を選択します。
. *[タイプ]* で、リポジトリを表す *[VCS リポジトリ]*を選択します。
. *[WHERE]*で、*[コード所有者がいる]*>*[is]*>*[true]*を選択します。
. ブランチ保護ルールの属性を選択します。*追加* > *VCSBranchProtectionRuleを含むもの*。
+
*VCSBranchProtectionRule* は *[THAT CONTAINS]* フィールドに表示されます。

. ルールを選択します。*WHERE*内:*[追加*] >*[コード所有者のレビューが必要か]*>*[is]*>*[false]*を選択します。
. ブランチを選択します:*[追加* ] >*[VCSBranchPattern を保護する]*>*[名前]*>*[is]*>*[main]*。
. *[検索]*を選択します。
+
クエリ結果が表示されます。
+
image::search-and-investigate/investigate-eg4.1.png[]


=== クエリの例 #2

*書き込み* 権限を持つすべての VCS デプロイキーを検索します。

盗まれたデプロイ キーが攻撃者によって使用されるリスクを最小限に抑えるために、パイプラインが適切に機能するために書き込み権限が必要ない場合は、すべてのデプロイ キーの権限レベルを *読み取り専用*に下げることをお勧めします。

image::search-and-investigate/investigate-eg2.1.png[]

=== クエリの例 #3

フォークできるプライベート コード リポジトリをすべて検索します。

攻撃者はフォークを使用してパイプラインをトリガーするプル リクエストを作成し、それを使用して悪意のあるコードを実稼働環境にデプロイする可能性があります。フォークを許可する必要がない場合は、各リポジトリのフォーク許可を、できれば組織レベルで無効にすることをお勧めします。

image::search-and-investigate/investigate-eg5.1.png[]
